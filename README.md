# ПРОЕКТ Анализ Данных
#### _Сенников Александр_
#### _Халидов Асхаб_
## Описание
Планируем анализировать данные за последние 8 лет по курсу доллар США / казахстанский тенге и кросс-курсам на другие валюты (евро, юань, рубль и др.) с сайта Нац Банка Республики Казахстан. Также будут взяты данные по ключевой ставке и ее изменению для анализа влияния на курс валют.
Эти результаты могут быть полезны для инвесторов, предпринимателей и других заинтересованных лиц, которые хотят понимать, как курсы валют могут изменяться в будущем и какие факторы могут на них влиять.
## Этапы
* Выбор темы
* Сбор данных
* Предварительная обработка
* Визуализация
* Создание новых признаков
* Гипотезы
* Машинное обучение

## Выбор темы
Рассматриваем данные с 2014 года по настоящее время.
## Сбор данных
Небходимо спарсить:
* Данные курсов валют по отношению к тенге
* Данные по ключевой ставке Национального Банка Казахстана
* курс USD/KZT - целевая переменная, обучим модель предсказывать его по нашим данным.

Категориальные признаки:
* Считается, что важную роль в курсах валют играет налоговая неделя, в течение которой крупнейшие компании выходят на рынки и закупаются национальной валютой для выплат в пользу бюджета. Время действия налоговой недели (подготовительный период – 15-19 числа, период платежей – 20-25 числа). Насколько сильно она влияет на процесс курсообразования тенге?
На основании имеющихся признаков создадим новые. Из столбца с датой достанем является ли этот день днём налоговой недели и посмотрим на динамику курса в такие дни.

* В какие дни выгоднее всего покупать или сдавать валюту? В интернете есть исследования, в которых говорится, что наиболее активными днями на валютном рынке РБ являются понедельник и вторник. Именно в начале недели чаще всего бывает максимальный курс, по которому выгоднее продавать валюту. Ближе к концу недели курс, чаще всего, снижается. Будет ли это работать в нашем случае?
Для начала все дни сгруппируем по неделям. Для каждой недели надо найти наименьшее и наибольшее значение курса.

## Предварительная обработка
* Переименование колонок
* Меняем тип данных Даты на datetime
* Удаляем ненужные колонки
* Устанавливаем названия колонок
* Функция def change_value для изменения значений ставки def change_value
* Объединяем данные

## Визуализация
#### Курс валют
* В первую очередь построили матрицу корреляций и выяснили, какие из валют имеют сильную корреляцию друг с другом. 
Построим точеченую диагрмамму зависимости курса Дирхама от курса Доллара и подвердим рассчитанное значение корреляции (прямая линия - полная взаимосвязаны). Это связано с тем, курс дирхама с 1980 года привязан к доллару США в соотношении 1 доллар = 3,6725 дирхама.

* Далее мы построили графики, которые показали, как изменился курс каждой из валют во времени
* Также были построены гистограммы и boxplot'ы для каждой из валют, чтобы посмотреть на их распределение.

* Для общей картины построили на одном графике все курсы валют.

На основе полученных визуализаций можно сделать выводы о взаимосвязи между курсами различных валют, а также выдвинуть гипотезы о том, какие факторы могут влиять на изменение курсов валют. 

#### Ключевая ставка
* Построили график изменения ставки
* Построили гистограмму распределения размера ставки
* Построили boxplot размера ставки

## Создание новых признаков
* Признак 1:

Считается, что важную роль в курсах валют играет налоговая неделя, в течение которой крупнейшие компании выходят на рынки и закупаются национальной валютой для выплат в пользу бюджета. Время действия налоговой недели (подготовительный период – 15-19 числа, период платежей – 20-25 числа). Насколько сильно она влияет на процесс курсообразования тенге? На основании имеющихся признаков создадим новые. Из столбца с датой достанем является ли этот день днём налоговой недели и посмотрим на динамику курса в такие дни.

* Признак 2:

В какие дни выгоднее всего покупать или сдавать валюту? В интернете есть мнение, в которых говорится, что наиболее активными днями на валютном рынке являются понедельник и вторник. Именно в начале недели чаще всего бывает максимальный курс, по которому выгоднее продавать валюту. Ближе к концу недели курс, чаще всего, снижается. Будет ли это работать в нашем случае?
Рассмотрим каждый год отдельно

## Гипотезы
* Гипотезы про курс в период платежей
* Гипотезы про лучший день для покупки/продажи валюты

## Машинное обучение
* Линейная регрессия
* Случайный лес
* kNN
* LASSO-регрессия
* Ridge-регрессия
* ElasticNet
* Решающее дерево
* CatBoostRegressor
